let salads = [
    {
        id : 1,
        name : "Mediterranean Chickpea salad",
        image : "../Images/food1.png",
        price : 270,
        energy : 386,
        protein : 19,
        carbs : 39,
        fats : 18,
        fibre : 9,
        quantity : 0
    },
    {
        id : 2,
        name : "Quinoa Grilled veg tofu salad",
        image : "../Images/food2.png",
        price : 190,
        energy : 386,
        protein : 19,
        carbs : 39,
        fats : 18,
        fibre : 9,
        quantity : 0
    },
    {
        id : 3,
        name : "Corn-Cucumber-Bean Salad",
        image : "https://static.onecms.io/wp-content/uploads/sites/9/2016/03/201007-xl-corn-salad-green-beans_0.jpg",
        price : 169,
        energy : 386,
        protein : 19,
        carbs : 33,
        fats : 11,
        fibre : 9,
        quantity : 0
    },
    {
        id : 4,
        name : "Chicken Caesar Salad",
        image : "https://i2.wp.com/mygorgeousrecipes.com/wp-content/uploads/2019/01/Grilled-Chicken-Caesar-Salad-with-Heatlhy-Yogurt-Dressing-j6.jpg",
        price : 229,
        energy : 386,
        protein : 19,
        carbs : 39,
        fats : 18,
        fibre : 9,
        quantity : 0
    },
    {
        id : 5,
        name : "Strawberry Caprese Pasta Salad",
        image : "https://hips.hearstapps.com/hmg-prod.s3.amazonaws.com/images/strawberry-caprese-pasta-salad-1530636843.jpg?crop=1.00xw:1.00xh;0,0&resize=980:*",
        price : 340,
        energy : 386,
        protein : 19,
        carbs : 39,
        fats : 18,
        fibre : 9,
        quantity : 0
    },
    {
        id : 6,
        name :"Lentil and Steak Salad",
        image : "https://hips.hearstapps.com/hmg-prod.s3.amazonaws.com/images/steak-lentil-salad-1537805987.png?crop=0.910xw:0.610xh;0.0173xw,0.280xh&resize=980:*",
        price : 300,
        energy : 386,
        protein : 19,
        carbs : 39,
        fats : 18,
        fibre : 9,
        quantity : 0
    },
    {
        id : 7,
        name : "Kiwi & Avocado Edamam Seeds Salad",
        image : "https://saltedplains.com/wp-content/uploads/2017/08/kiwi-avocado-salad-1.jpg",
        price : 259,
        energy : 386,
        protein : 19,
        carbs : 39,
        fats : 18,
        fibre : 9,
        quantity : 0
    }
]

let rice = [
    {
        id : 8,
        name : "Schezwan Chicken Rice Bowl",
        image : "https://thumbs.dreamstime.com/z/schezwan-chicken-fried-rice-black-bowl-dark-slate-background-indo-chinese-cuisine-dish-schezwan-chicken-fried-rice-black-159831808.jpg",
        price : 249,
        energy : 386,
        protein : 19,
        carbs : 39,
        fats : 18,
        fibre : 9,
        quantity : 0
    },
    {
        id : 9,
        name : "Mexican-Burrito Bowl",
        image : "https://imagesvc.meredithcorp.io/v3/mm/image?url=https%3A%2F%2Fstatic.onecms.io%2Fwp-content%2Fuploads%2Fsites%2F19%2F2015%2F04%2F02%2Fvegetarian-burrito-bowls-ay.jpg&q=85",
        price : 190,
        energy : 386,
        protein : 19,
        carbs : 39,
        fats : 18,
        fibre : 9,
        quantity : 0
    },
    {
        id : 10,
        name : "Mutter Paneer with Jeera rice",
        image : "https://s3-ap-southeast-1.amazonaws.com/foodvista.1/b840d1b6-a751-49b3-8f26-bdf478fb0da4.JPG",
        price : 169,
        energy : 386,
        protein : 19,
        carbs : 33,
        fats : 11,
        fibre : 9,
        quantity : 0
    },
    {
        id : 11,
        name : "Ultimate Burrito Bow",
        image : "https://i2.wp.com/blog.oziva.in/wp-content/uploads/2020/11/63aa6-pexels-photo-709823.jpeg?resize=780%2C468&ssl=1",
        price : 229,
        energy : 386,
        protein : 19,
        carbs : 39,
        fats : 18,
        fibre : 9,
        quantity : 0
    },
    {
        id : 12,
        name : "Kale and Mushroom Fried Rice",
        image : "https://hips.hearstapps.com/hmg-prod.s3.amazonaws.com/images/kale-mushroom-fried-rice-recipe-1615839557.png?crop=1.00xw:1.00xh;0,0&resize=980:*",
        price : 340,
        energy : 386,
        protein : 19,
        carbs : 39,
        fats : 18,
        fibre : 9,
        quantity : 0
    }
]

let sandwich = [
    {
        id : 13,
        name :"Spinach Corn Sandwich",
        image : "https://theflavoursofkitchen.com/wp-content/uploads/2017/06/Spinach-Corn-Sandwich-1.jpg",
         price : 139,
        energy : 386,
        protein : 19,
        carbs : 39,
        fats : 18,
        fibre : 9,
        quantity : 0
    },
    {
        id : 14,
        name : "Chicken-Tikka Sandwich",
        image : "https://images.kitchenstories.io/recipeImages/R1075-photo-final-4x3.jpg",
        price : 159,
        energy : 386,
        protein : 19,
        carbs : 39,
        fats : 18,
        fibre : 9,
        quantity : 0
    },
    {
        id : 15,
        name :"Mexican-Pulled Chicken Sandwich",
        image : "https://s3-ap-southeast-1.amazonaws.com/foodvista.1/3c18ed21-0178-42fa-b5b1-cfcbbf2e82f0.jpg",
        price : 141,
        energy : 386,
        protein : 19,
        carbs : 39,
        fats : 18,
        fibre : 9,
        quantity : 0
    },
    {
        id : 16,
        name : "Omelette Cheese Sandwich",
        image : "https://lh3.googleusercontent.com/k9UxpOsNzS47FIlDbj_0Kra5EVgoyd47gr6uQNZ1FHr9A_761uJqU2FqqRw9mWiLMK4R-L2jKkvRmMXQ6JKqbw=w1280-h960-c-rj-v1-e365",
        price : 259,
        energy : 386,
        protein : 19,
        carbs : 39,
        fats : 18,
        fibre : 9,
        quantity : 0
    },{
        id : 17,
        name :"Paneer Bhurji-Sandwich",
        image : "https://www.indianhealthyrecipes.com/wp-content/uploads/2016/08/paneer-bhurji-sandwich-on-tawa-500x447.jpg",
        price : 300,
        energy : 386,
        protein : 19,
        carbs : 39,
        fats : 18,
        fibre : 9,
        quantity : 0
    },
]
let dessert = [
    {
        id : 18,
        name :"Avocado Mousse",
        image : "https://hips.hearstapps.com/hmg-prod.s3.amazonaws.com/images/pvn120120snack-001-1606243861.jpg?crop=0.952xw:0.952xh;0.0238xw,0&resize=980:*",
        price : 140,
        energy : 386,
        protein : 19,
        carbs : 39,
        fats : 18,
        fibre : 9,
        quantity : 0
    },
    {
        id : 19,
        name : "Pumpkin Pie in a Cup",
        image : "https://hips.hearstapps.com/hmg-prod.s3.amazonaws.com/images/recipe/pumpkin-pie-in-a-cup-1456848658.jpg?crop=0.743xw:0.558xh;0.104xw,0.344xh&resize=980:*",
        price : 160,
        energy : 386,
        protein : 19,
        carbs : 39,
        fats : 18,
        fibre : 9,
        quantity : 0
    },
    {
        id : 20,
        name :"Pomegranate Orange Tart",
        image : "https://hips.hearstapps.com/hmg-prod.s3.amazonaws.com/images/pomtart-1576523011.jpg?crop=1.00xw:0.753xh;0.00173xw,0.117xh&resize=980:*",
        price : 141,
        energy : 386,
        protein : 19,
        carbs : 39,
        fats : 18,
        fibre : 9,
        quantity : 0
    },
    {
        id : 21,
        name : "Berry-Quinoa Muffins",
        image : "https://hips.hearstapps.com/hmg-prod.s3.amazonaws.com/images/berry-quinoa-muffins-1615589850.png?crop=1xw:0.999345977763244xh;center,top&resize=980:*",
        price : 259,
        energy : 386,
        protein : 19,
        carbs : 39,
        fats : 18,
        fibre : 9,
        quantity : 0
    },{
        id : 22,
        name :"Cranberry-Swirled Cheesecake",
        image : "https://hips.hearstapps.com/hmg-prod.s3.amazonaws.com/images/cheesecake-1576526119.jpg?crop=1.00xw:0.753xh;0,0.165xh&resize=980:*",
        price : 300,
        energy : 386,
        protein : 19,
        carbs : 39,
        fats : 18,
        fibre : 9,
        quantity : 0
    },
]


let div = document.getElementById("food-menu");
let heading = document.getElementById("heading");

let category = localStorage.getItem("type");
heading.innerText = category;
if(category == "Salad Bowls"){
    displayfood(salads);
}
else if(category == "Rice Bowls"){
    displayfood(rice);
}
else if(category == "Sandwiches"){
    displayfood(sandwich);
}
else if(category == "Dessert"){
    displayfood(dessert);
}



function displayfood(info){
    info.forEach(element => {
        let outer = document.createElement("div");

        let image = document.createElement("img");
        image.src = element.image;
        image.setAttribute("class","food-image");

        let button = document.createElement("div");
        button.setAttribute("class","add-button");

        let name_p = document.createElement("p");
        name_p.setAttribute("class","name");
        name_p.innerText = element.name;

        let three = document.createElement("div");
        three.setAttribute("class","three-button");

        let add = document.createElement("div");
        add.setAttribute("class","add");
        add.innerText = "ADD";
        add.onclick = (event)=>{
            addToCart(event,element);
        }

        let plus = document.createElement("div");
        plus.setAttribute("class","plus");
        plus.innerText = "+";
        plus.onclick = (event)=>{
            increase(event,element);
        };

        let minus = document.createElement("div");
        minus.setAttribute("class","minus");
        minus.innerText = "-";
        minus.onclick = (event)=>{
            decrease(event,element);
        };

        three.append(minus,add,plus);
        button.append(name_p,three);

        let price = document.createElement("div");
        price.setAttribute("class","price-details");

        let rate = document.createElement("div");
        rate.setAttribute("class","price");
        rate.innerText = "â‚¹" + element.price;

        let calory = document.createElement("div");
        calory.setAttribute("class","calory");
        calory.innerText = element.energy + " Kcal";

        let type = document.createElement("div");
        type.setAttribute("class","type");
        type.innerText = "High protein";

        price.append(rate,calory,type);


        let count = document.createElement("div");
        count.setAttribute("class","calories-count");

        let div1 = document.createElement("div");
        let p1 = document.createElement("p");
        p1.setAttribute("class","count");
        p1.innerText = element.protein + " g";

        let p2 = document.createElement("p");
        p2.setAttribute("class","cal-gray");
        p2.innerText = "Protein";

        div1.append(p1,p2);

        

        let div2 = document.createElement("div");
        let p3 = document.createElement("p");
        p3.setAttribute("class","count");
        p3.innerText = element.carbs + " g";

        let p4 = document.createElement("p");
        p4.setAttribute("class","cal-gray");
        p4.innerText = "Carbs";

        div2.append(p3,p4);

        let div3 = document.createElement("div");
        let p5 = document.createElement("p");
        p5.setAttribute("class","count");
        p5.innerText = element.fats + " g";

        let p6 = document.createElement("p");
        p6.setAttribute("class","cal-gray");
        p6.innerText = "Fats";

        div3.append(p5,p6);

        let div4 = document.createElement("div");
        let p7 = document.createElement("p");
        p7.setAttribute("class","count");
        p7.innerText = element.fibre + " g";

        let p8 = document.createElement("p");
        p8.setAttribute("class","cal-gray");
        p8.innerText = "Fibre";

        div4.append(p7,p8);

        count.append(div1,div2,div3,div4);

        outer.append(image,button,price,count);
        div.append(outer);


    });
}



function increase(event,element){
    let num = event.target.parentNode.querySelector(".add");
    let count = num.innerText;

    let menu = JSON.parse(localStorage.getItem("cart"));
    let id = element.id;
    let flag = 0;

    menu.forEach(item => {
        if(item.id == id){
            flag = 1;
            item.quantity = Number(count) + 1;
        }
    });

    if(num.innerText == "ADD"){
        num.innerText = 1;

        if(flag == 0){
            element.quantity = 1;
            menu.push(element);
        }
       
    }
    else{
        num.innerText = Number(count) + 1;
    }

    localStorage.setItem("cart",JSON.stringify(menu));
    //console.log(JSON.parse(localStorage.getItem("cart")));
    displayPrice();
}
function decrease(event,element){
    let num = event.target.parentNode.querySelector(".add");
    let count = num.innerText;

    let menu = JSON.parse(localStorage.getItem("cart"));
    let id = element.id;


    if(num.innerText == "ADD"){
        num.innerText = "ADD";
    }
    else{
        
        if(Number(count) > 1){
            num.innerText = Number(count) - 1;
            menu.forEach(item => {
                if(item.id == id){
                    item.quantity = Number(count) - 1;
                }
            });
        }
        else{
            num.innerText = "ADD";
             menu.forEach(item => {
                if(item.id == id){
                    item.quantity = 0;
                }
            });

        }
    }

    localStorage.setItem("cart",JSON.stringify(menu));
   // console.log(JSON.parse(localStorage.getItem("cart")));
   displayPrice();
}
localStorage.setItem("cart",JSON.stringify([]));
function addToCart(event,element){
    let menu = JSON.parse(localStorage.getItem("cart"));
    let id = element.id;
    let flag = 0;
    menu.forEach(item => {
        if(item.id == id){
            flag = 1;
            if(event.target.innerText == "ADD"){
                event.target.innerText = 1;
                item.quantity = 1;
            }
        }
    });
    if(flag == 0){
        event.target.innerText = 1;
        element.quantity = 1;
        menu.push(element);
    }
    localStorage.setItem("cart",JSON.stringify(menu));
    console.log(JSON.parse(localStorage.getItem("cart")));
    displayPrice();
}


let displayItems = document.getElementById("count");

let displaytotal = document.getElementById("amount");

function displayPrice(){
    let cartItems = JSON.parse(localStorage.getItem("cart"));
    let noOfItems = 0;
    let totalAmount = 0;
    cartItems.forEach(foodItem => {
        noOfItems += foodItem.quantity;
        totalAmount += foodItem.quantity * foodItem.price;
    });

    displayItems.innerText = noOfItems;
    displaytotal.innerText ="â‚¹" + totalAmount + "\t";
}

function navigate(){
    location.assign("../HTML/cart.html");
}






